---
layout: default
---

<body>
    <div class="theme-switcher">
        <button class="theme-button"></button>
        <div class="theme-menu" id="themeMenu">
            <div class="theme-option" data-theme="typora">typora主题</div>
            <div class="theme-option" data-theme="golden">金色主题</div>
            <div class="theme-option" data-theme="github">GitHub主题</div>
            <div class="theme-option" data-theme="dark">暗色主题</div>
            <div class="theme-option" data-theme="green">护眼主题</div>
            <div class="theme-option" data-theme="gallery">美化主题</div>
        </div>
    </div>

    <article class="article">
        <div class="article-header">
            <div class="article-meta">
                <span class="article-date">
                    <i class="fas fa-calendar-alt"></i>
                    {{ page.date | date: "%Y-%m-%d" }}
                </span>
                {% if page.tags %}
                <span class="article-tags">
                    <i class="fas fa-tags"></i>
                    {{ page.tags | join: ", " }}
                </span>
                {% endif %}
            </div>
            <h1 class="article-title">{{ page.title }}</h1>
        </div>
        <div class="markdown-theme-github">{{ content }}</div>
    </article>

    <script>
        // 主要变量定义
        const article = document.querySelector('article');
        const themeMenu = document.getElementById('themeMenu');
        const themeButton = document.querySelector('.theme-button');
        const markdownContainer = document.querySelector('[class^="markdown-theme"]');
        let isWideScreen = localStorage.getItem('content-width') === 'wide';

        // 工具函数
        const setArticleWidth = (isWide) => {
            const baseClasses = 'bg-white rounded-lg shadow-md p-6';
            article.className = `${baseClasses} content-${isWide ? 'wide' : 'narrow'}`;
            localStorage.setItem('content-width', isWide ? 'wide' : 'narrow');
        };

        const changeTheme = (theme) => {
            markdownContainer.className = `markdown-theme-${theme}`;
            localStorage.setItem('preferred-theme', theme);
            themeMenu.classList.remove('active');
        };

        // 事件监听设置
        let clickTimer = null;

        themeButton.addEventListener('click', (e) => {
            if (e.detail === 1) {
                clickTimer = setTimeout(() => {
                    themeMenu.classList.toggle('active');
                    e.stopPropagation();
                }, 200); // 200ms 延迟，等待可能的双击事件
            }
        });

        themeButton.addEventListener('dblclick', (e) => {
            e.preventDefault();
            e.stopPropagation();
            clearTimeout(clickTimer); // 清除单击事件的计时器
            themeMenu.classList.remove('active');
            isWideScreen = !isWideScreen;
            setArticleWidth(isWideScreen);
        });

        document.addEventListener('click', (e) => {
            if (!document.querySelector('.theme-switcher').contains(e.target)) {
                themeMenu.classList.remove('active');
            }
        });

        // 主题选项事件委托
        document.querySelector('.theme-menu').addEventListener('click', (e) => {
            const themeOption = e.target.closest('.theme-option');
            if (themeOption) {
                changeTheme(themeOption.dataset.theme);
            }
        });

        // 页面加载时恢复之前选择的主题和宽度
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('preferred-theme');
            if (savedTheme) {
                changeTheme(savedTheme);
            }

            setArticleWidth(isWideScreen);

            themeMenu.classList.remove('active');
        });
    </script>
    <script src="/assets/js/highlight-search.js"></script>
</body>



